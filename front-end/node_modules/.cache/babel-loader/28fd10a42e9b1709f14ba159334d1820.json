{"remainingRequest":"D:\\projectFPT\\SolidityProject\\front-end\\node_modules\\babel-loader\\lib\\index.js!D:\\projectFPT\\SolidityProject\\front-end\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\projectFPT\\SolidityProject\\front-end\\src\\services\\auth.js","dependencies":[{"path":"D:\\projectFPT\\SolidityProject\\front-end\\src\\services\\auth.js","mtime":1634825887926},{"path":"D:\\projectFPT\\SolidityProject\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\projectFPT\\SolidityProject\\front-end\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\projectFPT\\SolidityProject\\front-end\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJEOi9wcm9qZWN0RlBUL1NvbGlkaXR5UHJvamVjdC9mcm9udC1lbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkQ6L3Byb2plY3RGUFQvU29saWRpdHlQcm9qZWN0L2Zyb250LWVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIkQ6L3Byb2plY3RGUFQvU29saWRpdHlQcm9qZWN0L2Zyb250LWVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIkQ6L3Byb2plY3RGUFQvU29saWRpdHlQcm9qZWN0L2Zyb250LWVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwovKiBpbXBvcnQgeyBIdHRwIH0gZnJvbSAnLi9odHRwLmpzJyAqLwoKaW1wb3J0IHsgUmVzcG9uc2VXcmFwcGVyLCBFcnJvcldyYXBwZXIgfSBmcm9tICcuL2Jhc2UuanMnOwppbXBvcnQgJHN0b3JlIGZyb20gJy4uL3N0b3JlJzsKaW1wb3J0ICRyb3V0ZXIgZnJvbSAnLi4vcm91dGVyJzsKaW1wb3J0IHsgQVBJX1VSTCB9IGZyb20gJy4uLy5lbnYnOwp2YXIgQkVBUkVSID0gJyc7CmV4cG9ydCB2YXIgQXV0aFNlcnZpY2UgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIEF1dGhTZXJ2aWNlKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEF1dGhTZXJ2aWNlKTsKICB9CgogIF9jcmVhdGVDbGFzcyhBdXRoU2VydmljZSwgbnVsbCwgW3sKICAgIGtleTogIm1ha2VMb2dpbiIsCgogICAgLyoqDQogICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICAgICAqIEBBUEkNCiAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQogICAgICovCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX21ha2VMb2dpbiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShfcmVmKSB7CiAgICAgICAgdmFyIHVzZXJuYW1lLCBwYXNzd29yZCwgcmVzcG9uc2U7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgdXNlcm5hbWUgPSBfcmVmLnVzZXJuYW1lLCBwYXNzd29yZCA9IF9yZWYucGFzc3dvcmQ7CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoIiIuY29uY2F0KEFQSV9VUkwsICIvbG9naW4iKSwgewogICAgICAgICAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsCiAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICB1c2VDcmVkZW50YWlsczogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBfc2V0QXV0aERhdGEoewogICAgICAgICAgICAgICAgICBhY2Nlc3NUb2tlbjogcmVzcG9uc2UuZGF0YS5hY2Nlc3NUb2tlbiwKICAgICAgICAgICAgICAgICAgZXhwOiBfcGFyc2VUb2tlbkRhdGEocmVzcG9uc2UuZGF0YS5hY2Nlc3NUb2tlbikuZXhwCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBuZXcgUmVzcG9uc2VXcmFwcGVyKHJlc3BvbnNlLCByZXNwb25zZS5kYXRhKSk7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA5OwogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgxKTsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcldyYXBwZXIoX2NvbnRleHQudDApOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1sxLCA5XV0pOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBtYWtlTG9naW4oX3gpIHsKICAgICAgICByZXR1cm4gX21ha2VMb2dpbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gbWFrZUxvZ2luOwogICAgfSgpCiAgfSwgewogICAga2V5OiAibWFrZUxvZ291dCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX21ha2VMb2dvdXQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDA7CgogICAgICAgICAgICAgICAgLyogY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBuZXcgSHR0cCh7IGF1dGg6IHRydWUgfSkucG9zdCgnYXV0aC9sb2dvdXQnLCB7fSwgeyB1c2VDcmVkZW50YWlsczogdHJ1ZSB9KSAqLwogICAgICAgICAgICAgICAgLy8gX3Jlc2V0QXV0aERhdGEoKQogICAgICAgICAgICAgICAgJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgICAgbmFtZTogJ0xvZ2luJwogICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkge30pOwogICAgICAgICAgICAgICAgLyogcmV0dXJuIG5ldyBSZXNwb25zZVdyYXBwZXIocmVzcG9uc2UsIHJlc3BvbnNlLmRhdGEpICovCgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA3OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gNDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcldyYXBwZXIoX2NvbnRleHQyLnQwKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCBudWxsLCBbWzAsIDRdXSk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIG1ha2VMb2dvdXQoKSB7CiAgICAgICAgcmV0dXJuIF9tYWtlTG9nb3V0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBtYWtlTG9nb3V0OwogICAgfSgpCiAgfSwgewogICAga2V5OiAibWFrZVJlZ2lzdGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfbWFrZVJlZ2lzdGVyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMyhfcmVmMikgewogICAgICAgIHZhciB1c2VybmFtZSwgZW1haWwsIHBhc3N3b3JkLCByZXNwb25zZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgdXNlcm5hbWUgPSBfcmVmMi51c2VybmFtZSwgZW1haWwgPSBfcmVmMi5lbWFpbCwgcGFzc3dvcmQgPSBfcmVmMi5wYXNzd29yZDsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gMTsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KCIiLmNvbmNhdChBUElfVVJMLCAiL2F1dGgvcmVnaXN0ZXIiKSwgewogICAgICAgICAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsCiAgICAgICAgICAgICAgICAgIGVtYWlsOiBlbWFpbCwKICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgIHVzZUNyZWRlbnRhaWxzOiB0cnVlCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCBuZXcgUmVzcG9uc2VXcmFwcGVyKHJlc3BvbnNlLCByZXNwb25zZS5kYXRhKSk7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gOTsKICAgICAgICAgICAgICAgIF9jb250ZXh0My50MCA9IF9jb250ZXh0M1siY2F0Y2giXSgxKTsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcldyYXBwZXIoX2NvbnRleHQzLnQwKTsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMywgbnVsbCwgW1sxLCA5XV0pOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBtYWtlUmVnaXN0ZXIoX3gyKSB7CiAgICAgICAgcmV0dXJuIF9tYWtlUmVnaXN0ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIG1ha2VSZWdpc3RlcjsKICAgIH0oKQogIH0sIHsKICAgIGtleTogInJlZnJlc2hUb2tlbnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWZyZXNoVG9rZW5zID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICB2YXIgY3VycmVudFVzZXJJZCwgcmVzcG9uc2U7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5wcmV2ID0gMDsKICAgICAgICAgICAgICAgIGN1cnJlbnRVc2VySWQgPSAkc3RvcmUuc3RhdGUudXNlci5jdXJyZW50VXNlci5pZDsKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KCIiLmNvbmNhdChBUElfVVJMLCAiL2F1dGgvcmVmcmVzaC10b2tlbnMiKSwgewogICAgICAgICAgICAgICAgICBjdXJyZW50VXNlcklkOiBjdXJyZW50VXNlcklkCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgIHVzZUNyZWRlbnRhaWxzOiB0cnVlCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDQuc2VudDsKCiAgICAgICAgICAgICAgICBfc2V0QXV0aERhdGEoewogICAgICAgICAgICAgICAgICBhY2Nlc3NUb2tlbjogcmVzcG9uc2UuZGF0YS5hY2Nlc3NUb2tlbiwKICAgICAgICAgICAgICAgICAgZXhwOiBfcGFyc2VUb2tlbkRhdGEocmVzcG9uc2UuZGF0YS5hY2Nlc3NUb2tlbikuZXhwCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgbmV3IFJlc3BvbnNlV3JhcHBlcihyZXNwb25zZSwgcmVzcG9uc2UuZGF0YSkpOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICBfY29udGV4dDQucHJldiA9IDk7CiAgICAgICAgICAgICAgICBfY29udGV4dDQudDAgPSBfY29udGV4dDRbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfY29udGV4dDQudDAucmVzcG9uc2UuZGF0YS5jb2RlKTsKCiAgICAgICAgICAgICAgICBfcmVzZXRBdXRoRGF0YSgpOwoKICAgICAgICAgICAgICAgICRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICAgIG5hbWU6ICdMb2dpbicKICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHt9KTsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcldyYXBwZXIoX2NvbnRleHQ0LnQwKTsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCwgbnVsbCwgW1swLCA5XV0pOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiByZWZyZXNoVG9rZW5zKCkgewogICAgICAgIHJldHVybiBfcmVmcmVzaFRva2Vucy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gcmVmcmVzaFRva2VuczsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImlzQWNjZXNzVG9rZW5FeHBpcmVkIiwKCiAgICAvKioNCiAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQogICAgICogQE1FVEhPRFMNCiAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQogICAgICovCiAgICB2YWx1ZTogZnVuY3Rpb24gaXNBY2Nlc3NUb2tlbkV4cGlyZWQoKSB7CiAgICAgIHZhciBhY2Nlc3NUb2tlbkV4cERhdGUgPSAkc3RvcmUuc3RhdGUuYXV0aC5hY2Nlc3NUb2tlbkV4cERhdGUgLSAxMDsKICAgICAgdmFyIG5vd1RpbWUgPSBNYXRoLmZsb29yKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMCk7CiAgICAgIHJldHVybiBhY2Nlc3NUb2tlbkV4cERhdGUgPD0gbm93VGltZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJoYXNSZWZyZXNoVG9rZW4iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhhc1JlZnJlc2hUb2tlbigpIHsKICAgICAgcmV0dXJuIEJvb2xlYW4obG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3JlZnJlc2hUb2tlbicpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRSZWZyZXNoVG9rZW4iLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldFJlZnJlc2hUb2tlbihzdGF0dXMpIHsKICAgICAgaWYgKCFbJycsICd0cnVlJ10uaW5jbHVkZXMoc3RhdHVzKSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcigic2V0UmVmcmVzaFRva2VuOiBpbnZhbGlkIHZhbHVlICIuY29uY2F0KHN0YXR1cywgIjsgRXhwZWN0IG9uZSBvZiBbJycsICd0cnVlJ10iKSk7CiAgICAgIH0KCiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdyZWZyZXNoVG9rZW4nLCBzdGF0dXMpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldEJlYXJlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0QmVhcmVyKCkgewogICAgICByZXR1cm4gQkVBUkVSOwogICAgfQogIH0sIHsKICAgIGtleTogInNldEJlYXJlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0QmVhcmVyKGFjY2Vzc1Rva2VuKSB7CiAgICAgIEJFQVJFUiA9ICIiLmNvbmNhdChhY2Nlc3NUb2tlbik7CiAgICB9CiAgICAvKg0KICAgICAqdGhhbSBraOG6o28gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzUyMjgwNTIvZGVib3VuY2UtZnVuY3Rpb24taW1wbGVtZW50ZWQtd2l0aC1wcm9taXNlcw0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJfZGVib3VuY2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9kZWJvdW5jZShpbm5lcikgewogICAgICB2YXIgbXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDA7CiAgICAgIHZhciB0aW1lciA9IG51bGw7CiAgICAgIHZhciByZXNvbHZlcyA9IFtdOwogICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7CiAgICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciByZXN1bHQgPSBpbm5lcigpOwogICAgICAgICAgcmVzb2x2ZXMuZm9yRWFjaChmdW5jdGlvbiAocikgewogICAgICAgICAgICByZXR1cm4gcihyZXN1bHQpOwogICAgICAgICAgfSk7CiAgICAgICAgICByZXNvbHZlcyA9IFtdOwogICAgICAgIH0sIG1zKTsKICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICAgIHJldHVybiByZXNvbHZlcy5wdXNoKHJlc29sdmUpOwogICAgICAgIH0pOwogICAgICB9OwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEF1dGhTZXJ2aWNlOwp9KCk7Ci8qKg0KICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICogQHByaXZhdGVfbWV0aG9kcw0KICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICovCgpfZGVmaW5lUHJvcGVydHkoQXV0aFNlcnZpY2UsICJkZWJvdW5jZVJlZnJlc2hUb2tlbnMiLCBBdXRoU2VydmljZS5fZGVib3VuY2UoZnVuY3Rpb24gKCkgewogIHJldHVybiBBdXRoU2VydmljZS5yZWZyZXNoVG9rZW5zKCk7Cn0sIDEwMCkpOwoKZnVuY3Rpb24gX3BhcnNlVG9rZW5EYXRhKGFjY2Vzc1Rva2VuKSB7CiAgdmFyIHBheWxvYWQgPSAnJzsKICB2YXIgdG9rZW5EYXRhID0ge307CgogIHRyeSB7CiAgICBwYXlsb2FkID0gYWNjZXNzVG9rZW4uc3BsaXQoJy4nKVsxXTsKICAgIHRva2VuRGF0YSA9IEpTT04ucGFyc2UoYXRvYihwYXlsb2FkKSk7CiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7CiAgfQoKICByZXR1cm4gdG9rZW5EYXRhOwp9CgpmdW5jdGlvbiBfcmVzZXRBdXRoRGF0YSgpIHsKICAvLyByZXNldCB1c2VyRGF0YQogICRzdG9yZS5jb21taXQoJ3VzZXIvU0VUX0NVUlJFTlRfVVNFUicsIHt9KTsKICAkc3RvcmUuY29tbWl0KCdhdXRoL1NFVF9BVE9LRU5fRVhQX0RBVEUnLCBudWxsKTsgLy8gcmVzZXQgcGFnZURhdGEKCiAgJHN0b3JlLmNvbW1pdCgnZGF0YS9yZXNldEFsbCcpOwogICRzdG9yZS5jb21taXQoJ3ZpZXdzL3Jlc2V0QWxsJyk7IC8vIHJlc2V0IHRva2VucwoKICBBdXRoU2VydmljZS5zZXRSZWZyZXNoVG9rZW4oJycpOwogIEF1dGhTZXJ2aWNlLnNldEJlYXJlcignJyk7Cn0KCmZ1bmN0aW9uIF9zZXRBdXRoRGF0YSgpIHsKICB2YXIgX3JlZjMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LAogICAgICBhY2Nlc3NUb2tlbiA9IF9yZWYzLmFjY2Vzc1Rva2VuLAogICAgICBleHAgPSBfcmVmMy5leHA7CgogIGNvbnNvbGUubG9nKGFjY2Vzc1Rva2VuKTsKICBjb25zb2xlLmxvZyhleHApOwogIEF1dGhTZXJ2aWNlLnNldFJlZnJlc2hUb2tlbigndHJ1ZScpOwogIEF1dGhTZXJ2aWNlLnNldEJlYXJlcihhY2Nlc3NUb2tlbik7CiAgJHN0b3JlLmNvbW1pdCgnYXV0aC9TRVRfQVRPS0VOX0VYUF9EQVRFJywgZXhwKTsKfQovKi0tLS0tLS0tLS0tLS0tLS0tIExvZ2luLS0tLS0tLS0tLS0tLS0tLS0gKi8KCgpleHBvcnQgZnVuY3Rpb24gbWFrZUxvZ2luKF94MywgX3g0KSB7CiAgcmV0dXJuIF9tYWtlTG9naW4yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9tYWtlTG9naW4yKCkgewogIF9tYWtlTG9naW4yID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSh1c2VyLCBwYXNzKSB7CiAgICB2YXIgcmVxOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCgnL0xvZ2luJywgewogICAgICAgICAgICAgIFVzZXJuYW1lOiB1c2VyLAogICAgICAgICAgICAgIFB3ZDogcGFzcwogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJlcSA9IF9jb250ZXh0NS5zZW50OwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgicmV0dXJuIiwgcmVxKTsKCiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWU1KTsKICB9KSk7CiAgcmV0dXJuIF9tYWtlTG9naW4yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBnZXRBY2Nlc3NUb2tlbihfeDUpIHsKICByZXR1cm4gX2dldEFjY2Vzc1Rva2VuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9nZXRBY2Nlc3NUb2tlbigpIHsKICBfZ2V0QWNjZXNzVG9rZW4gPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KHVzZXJEZXRhaWwpIHsKICAgIHZhciByZXE7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQ2LnByZXYgPSBfY29udGV4dDYubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDYucHJldiA9IDA7CiAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMzsKICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoJy9hY2Nlc3N0b2tlbicsIHsKICAgICAgICAgICAgICBpZDogdXNlckRldGFpbC5pZCwKICAgICAgICAgICAgICB1c2VybmFtZTogdXNlckRldGFpbC5Vc2VybmFtZSwKICAgICAgICAgICAgICBwYXNzd29yZDogdXNlckRldGFpbC5QYXNzd29yZCwKICAgICAgICAgICAgICByZWFsbmFtZTogdXNlckRldGFpbC5SZWFsbmFtZSwKICAgICAgICAgICAgICByb2xlOiB1c2VyRGV0YWlsLnJvbGUKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICByZXEgPSBfY29udGV4dDYuc2VudDsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5hYnJ1cHQoInJldHVybiIsIG5ldyBSZXNwb25zZVdyYXBwZXIocmVxLCByZXEuZGF0YSkpOwoKICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgX2NvbnRleHQ2LnByZXYgPSA3OwogICAgICAgICAgICBfY29udGV4dDYudDAgPSBfY29udGV4dDZbImNhdGNoIl0oMCk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuYWJydXB0KCJyZXR1cm4iLCBuZXcgRXJyb3JXcmFwcGVyKF9jb250ZXh0Ni50MCkpOwoKICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWU2LCBudWxsLCBbWzAsIDddXSk7CiAgfSkpOwogIHJldHVybiBfZ2V0QWNjZXNzVG9rZW4uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQ=="},{"version":3,"sources":["D:/projectFPT/SolidityProject/front-end/src/services/auth.js"],"names":["axios","ResponseWrapper","ErrorWrapper","$store","$router","API_URL","BEARER","AuthService","username","password","post","useCredentails","response","_setAuthData","accessToken","data","exp","_parseTokenData","push","name","catch","email","console","log","currentUserId","state","user","currentUser","id","code","_resetAuthData","accessTokenExpDate","auth","nowTime","Math","floor","Date","getTime","Boolean","localStorage","getItem","status","includes","Error","setItem","inner","ms","timer","resolves","clearTimeout","setTimeout","result","forEach","r","Promise","resolve","_debounce","refreshTokens","payload","tokenData","split","JSON","parse","atob","error","commit","setRefreshToken","setBearer","makeLogin","pass","Username","Pwd","req","getAccessToken","userDetail","Password","realname","Realname","role"],"mappings":"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","sourcesContent":["import axios from 'axios'\r\n\r\n/* import { Http } from './http.js' */\r\nimport { ResponseWrapper, ErrorWrapper } from './base.js'\r\nimport $store from '../store'\r\nimport $router from '../router'\r\n\r\nimport { API_URL } from '../.env'\r\n\r\nlet BEARER = ''\r\n\r\nexport class AuthService {\r\n  /**\r\n   ******************************\r\n   * @API\r\n   ******************************\r\n   */\r\n  \r\n  static async makeLogin ({ username, password }) {\r\n    try {\r\n      const response = await axios.post(`${API_URL}/login`,{username, password}, {useCredentails: true})\r\n      _setAuthData({\r\n        accessToken: response.data.accessToken,\r\n        exp: _parseTokenData(response.data.accessToken).exp\r\n      })\r\n      return new ResponseWrapper(response, response.data)\r\n    } catch (error) {\r\n      throw new ErrorWrapper(error)\r\n    }\r\n  }\r\n\r\n  static async makeLogout() {\r\n    try {\r\n      /* const response = await new Http({ auth: true }).post('auth/logout', {}, { useCredentails: true }) */\r\n      // _resetAuthData()\r\n\r\n      $router.push({ name: 'Login' }).catch(() => { })\r\n      /* return new ResponseWrapper(response, response.data) */\r\n    } catch (error) {\r\n      throw new ErrorWrapper(error)\r\n    }\r\n  }\r\n\r\n  static async makeRegister({ username, email, password }) {\r\n    try {\r\n      const response = await axios.post(`${API_URL}/auth/register`,\r\n        { username, email, password }, { useCredentails: true })\r\n      console.log(response)\r\n      return new ResponseWrapper(response, response.data)\r\n    } catch (error) {\r\n      throw new ErrorWrapper(error)\r\n    }\r\n  }\r\n\r\n\r\n  static async refreshTokens() {\r\n    try {\r\n      var currentUserId = $store.state.user.currentUser.id\r\n      const response = await axios.post(`${API_URL}/auth/refresh-tokens`, { currentUserId }, { useCredentails: true })\r\n      _setAuthData({\r\n        accessToken: response.data.accessToken,\r\n        exp: _parseTokenData(response.data.accessToken).exp\r\n      })\r\n      return new ResponseWrapper(response, response.data)\r\n    } catch (error) {\r\n      console.log(error.response.data.code)\r\n      _resetAuthData()\r\n      $router.push({ name: 'Login' }).catch(() => { })\r\n      throw new ErrorWrapper(error)\r\n    }\r\n  }\r\n\r\n  static debounceRefreshTokens = this._debounce(() => {\r\n    return this.refreshTokens()\r\n  }, 100)\r\n\r\n  /**\r\n   ******************************\r\n   * @METHODS\r\n   ******************************\r\n   */\r\n\r\n  static isAccessTokenExpired() {\r\n    const accessTokenExpDate = $store.state.auth.accessTokenExpDate - 10\r\n    const nowTime = Math.floor(new Date().getTime() / 1000)\r\n\r\n    return accessTokenExpDate <= nowTime\r\n  }\r\n\r\n  static hasRefreshToken() {\r\n    return Boolean(localStorage.getItem('refreshToken'))\r\n  }\r\n\r\n  static setRefreshToken(status) {\r\n    if (!['', 'true'].includes(status)) {\r\n      throw new Error(`setRefreshToken: invalid value ${status}; Expect one of ['', 'true']`)\r\n    }\r\n\r\n    localStorage.setItem('refreshToken', status)\r\n  }\r\n\r\n  static getBearer() {\r\n    return BEARER\r\n  }\r\n\r\n  static setBearer(accessToken) {\r\n    BEARER = `${accessToken}`\r\n  }\r\n\r\n  /*\r\n   *tham khảo https://stackoverflow.com/questions/35228052/debounce-function-implemented-with-promises\r\n   */\r\n  static _debounce(inner, ms = 0) {\r\n    let timer = null\r\n    let resolves = []\r\n\r\n    return function () {\r\n      clearTimeout(timer)\r\n      timer = setTimeout(() => {\r\n        const result = inner()\r\n        resolves.forEach(r => r(result))\r\n        resolves = []\r\n      }, ms)\r\n\r\n      return new Promise(resolve => resolves.push(resolve))\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n ******************************\r\n * @private_methods\r\n ******************************\r\n */\r\n\r\nfunction _parseTokenData(accessToken) {\r\n  let payload = ''\r\n  let tokenData = {}\r\n\r\n  try {\r\n    payload = accessToken.split('.')[1]\r\n    tokenData = JSON.parse(atob(payload))\r\n  } catch (error) {\r\n    throw new Error(error)\r\n  }\r\n\r\n  return tokenData\r\n}\r\n\r\nfunction _resetAuthData() {\r\n  // reset userData\r\n  $store.commit('user/SET_CURRENT_USER', {})\r\n  $store.commit('auth/SET_ATOKEN_EXP_DATE', null)\r\n\r\n  // reset pageData\r\n  $store.commit('data/resetAll')\r\n  $store.commit('views/resetAll')\r\n  // reset tokens\r\n  AuthService.setRefreshToken('')\r\n  AuthService.setBearer('')\r\n}\r\n\r\nfunction _setAuthData({ accessToken, exp } = {}) {\r\n  console.log(accessToken)\r\n  console.log(exp)\r\n  AuthService.setRefreshToken('true')\r\n  AuthService.setBearer(accessToken)\r\n  $store.commit('auth/SET_ATOKEN_EXP_DATE', exp)\r\n}\r\n\r\n/*----------------- Login----------------- */\r\nexport async function makeLogin(user, pass) {\r\n  const req = await axios.post('/Login', {\r\n    Username: user,\r\n    Pwd: pass\r\n  })\r\n  return req\r\n}\r\n\r\nexport async function getAccessToken(userDetail) {\r\n  try {\r\n    const req = await axios.post('/accesstoken', {\r\n      id: userDetail.id,\r\n      username: userDetail.Username,\r\n      password: userDetail.Password,\r\n      realname: userDetail.Realname,\r\n      role: userDetail.role\r\n    })\r\n    return new ResponseWrapper(req, req.data)\r\n  } catch (error) {\r\n    return new ErrorWrapper(error)\r\n  }\r\n}\r\n"]}]}